{% extends 'website/base.html' %}
{% load static %}
{% load core_tags %}


{% block content %}

    <section class="hero-section hero-2">
        <div class="text-stoke">
            <img src="{% static 'website/img/hero/4KQuality.png' %}" alt="img">
        </div>
        <div class="swiper hero-slider">
            <div class="swiper-wrapper">
                {% for s in top_three_series %}
                    <div class="swiper-slide">
                        <div class="hero-items">
                            <div class="hero-slider-bg bg-cover"
                                 style="background-image: url('{{ s.banner_image|image_or_placeholder:'1024x762' }}');"></div>
                            <div class="container-fluid">
                                <div class="row">
                                    <div class="col-lg-7">
                                        <div class="hero-content">
                                            <h1>
                                                <span>{{ s.title }}</span>
                                                <!-- Show first part of title, or use |truncatewords -->
                                            </h1>
                                            <ul>
                                                <li>Added On: {{ s.release_date }}</li>  <!-- Assuming you have these fields -->
                                            </ul>
                                            <p>
                                                {{ s.description|truncatewords:100 }}
                                                <!-- Truncate description to 20 words -->
                                            </p>

                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                {% endfor %}

            </div>
        </div>
        <div class="banner-thumnail-area-3">
            <div class="swiper banner-thumnail-slider">
                <div class="swiper-wrapper">
                    {% for s in top_three_series %}
                        <div class="swiper-slide">
                            <div class="banner-img" style="width: 300px; height: 220px; overflow: hidden;">
                                <img style="width: 100%; height: 100%; object-fit: cover;"
                                     src="{{ s.poster_image|image_or_placeholder:'300x220' }}" alt="img">
                            </div>

                        </div>
                    {% endfor %}
                </div>
            </div>
        </div>
    </section>

    <!-- Movie Section Start -->
    <section class="movie-section style-2 section-padding fix">
        <div class="container">
            <div class="section-title text-center">
                <h2>Featured: This Week's Hot Picks</h2>
            </div>
        </div>
        <div class="swiper movie-slider-2">
            <div class="swiper-wrapper">
                {% for series in currently_featured %}
                    <div class="swiper-slide">
                        <div class="movie-box-items-2">
                            <div class="movie-image">
                                <img src="{{ series.poster_image|image_or_placeholder:'1024x762' }}"
                                     alt="{{ series.title }}">
                                <div class="number">
                                    {{ forloop.counter }}  <!-- Shows the index of the series -->
                                </div>
                                <div class="movie-content">
                                    <ul class="post-time">
                                        <li>
                                            {{ series.duration|default:"N/A" }}
                                        </li>
                                        <li>
                                            <i class="fa-sharp fa-regular fa-tv"></i>
                                            4K Quality  <!-- Update this if you have a quality field -->
                                        </li>
                                    </ul>
                                    <h3>{{ series.title }}</h3>
                                    <p>{{ series.description|truncatewords:20 }}</p>  <!-- Truncate the description -->
                                </div>
                            </div>
                        </div>
                    </div>
                {% empty %}
                    <div class="swiper-slide">
                        <div class="movie-box-items-2">
                            <p>No currently featured series available.</p>
                        </div>
                    </div>
                {% endfor %}
            </div>
            <div class="swiper-dot text-center pt-5">
                <div class="dot"></div>
            </div>
        </div>

    </section>



    <!-- Upcoming Movie Section Start -->
    <section class="upcoming-movie-section fix section-padding pt-0">
        <div class="container">
            <div class="section-title-area">
                <div class="section-title style-2">
                    <h2>Upcoming Dramas</h2>
                </div>
            </div>
        </div>
        <div class="container-fluid">
            <div class="movie-wrapper style-2">
                <div class="swiper movie-slider-3">
                    <div class="swiper-wrapper">
                        {% for series in upcoming_series %}
                            <div class="swiper-slide">
                                <div class="movie-box-items style-2">
                                    <div style="max-width: 300px; max-height: 170px; overflow: hidden; border-radius: 10px;">
                                        <img src="{{ series.poster_image.url }}" alt="{{ series.title }}"
                                             style="width: 100%; height: auto; max-height: 100%; object-fit: cover; border-radius: 10px;">
                                    </div>
                                    <div class="movie-content">
                                        <ul class="post-time">
                                            <li>
                                               <i class="fa-sharp fa-regular fa-tv"></i>
                                            4K Quality  <!-- Update this if you have a quality field -->
                                            </li>
                                        </ul>
                                        <h3>{{ series.title }}</h3>
                                        <p>{{ series.description|truncatewords:15 }}</p>
                                    </div>
                                </div>


                            </div>
                        {% empty %}
                            <div class="swiper-slide">
                                <div class="movie-box-items style-2">
                                    <div class="movie-content">
                                        <p>No upcoming dramas available.</p>
                                    </div>
                                </div>
                            </div>
                        {% endfor %}
                    </div>
                </div>
            </div>
        </div>

    </section>


    <!-- Upcoming Movie Section Start -->
    <section class="upcoming-movie-section fix section-padding pt-0">
        <div class="container">
            <div class="section-title-area">
                <div class="section-title style-2">
                    <h2>Trending Dramas</h2>
                </div>
            </div>
        </div>
        <div class="container-fluid">
            <div class="movie-wrapper style-2">
                <div class="swiper movie-slider-3">
                    <div class="swiper-wrapper">
                        {% for series in trending_series %}
                            <div class="swiper-slide">
                                <div class="movie-box-items style-2">
                                    <div class="movie-image"
                                         style="max-width: 300px; max-height: 170px; overflow: hidden; border-radius: 10px;">
                                        <img src="{{ series.poster_image|image_or_placeholder:'300x170' }}" alt="{{ series.title }}"
                                             style="width: 100%; height: auto; max-height: 100%; object-fit: cover; border-radius: 10px;">
                                    </div>
                                    <div class="movie-content">
                                        <ul class="post-time">
                                            <li>
                                               <i class="fa-sharp fa-regular fa-tv"></i>
                                            4K Quality  <!-- Update this if you have a quality field -->
                                            </li>
                                        </ul>
                                        <h3>{{ series.title }}</h3>
                                        <p>{{ series.description|truncatewords:15 }}</p>
                                        <!-- Assuming description is a property of series -->
                                    </div>
                                </div>
                            </div>
                        {% endfor %}
                    </div>
                </div>
            </div>
        </div>

    </section>

    <!-- Recently Video Section Start -->
    {#    <section class="recently-videos fix section-padding pt-0">#}
    {#        <div class="container">#}
    {#            <div class="section-title-area">#}
    {#                <div class="section-title style-2">#}
    {#                    <h2>Recently Viewed</h2>#}
    {#                </div>#}
    {#                <div class="array-button-2">#}
    {#                    <button class="array-prev"><i class="fa-solid fa-chevron-left"></i></button>#}
    {#                    <button class="array-next"><i class="fa-solid fa-chevron-right"></i></button>#}
    {#                </div>#}
    {#            </div>#}
    {#            <div class="swiper recently-videos-slider">#}
    {#                <div class="swiper-wrapper">#}
    {#                    {% for series in currently_featured %}#}
    {#                        <div class="swiper-slide">#}
    {#                            <div class="recently-view-items">#}
    {#                                <div class="recently-image"#}
    {#                                     style="max-width: 320px; max-height: 385px; overflow: hidden; border-radius: 10px;">#}
    {#                                    <img src="{{ series.poster_image.url }}" alt="{{ series.title }}"#}
    {#                                         style="width: 100%; height: auto; max-height: 100%; object-fit: cover; border-radius: 10px;">#}
    {#                                </div>#}
    {#                            </div>#}
    {#                        </div>#}
    {#                    {% endfor %}#}
    {#                </div>#}
    {#            </div>#}
    {#        </div>#}
    {#    </section>#}


    <!-- Testimonial Section Start -->
    <section class="testimonial-section fix mb-4">
        <div class="container">
            <div class="section-title-area">
                <div class="section-title style-2">
                    <h2 class="wow fadeInUp" data-wow-delay=".3s">Our Client Feedback</h2>
                </div>
                <div class="array-button-2">
                    <button class="array-prev"><i class="fa-solid fa-chevron-left"></i></button>
                    <button class="array-next"><i class="fa-solid fa-chevron-right"></i></button>
                </div>
            </div>
            <div class="testimonial-wrapper">
                <div class="swiper testimonial-slider">
                    <div class="swiper-wrapper">
                        {% for testimonial in testimonials %}
                            <div class="swiper-slide">
                                <div class="testimonial-box-items">
                                    <div class="star">
                                        {% for i in "01234" %}  <!-- Loop to generate 5 stars -->
                                            {% if i < testimonial.rating|floatformat:0 %}
                                                <i class="fa-solid fa-star"></i>  <!-- Full star -->
                                            {% else %}
                                                <i class="fa-light fa-star"></i>  <!-- Empty star -->
                                            {% endif %}
                                        {% endfor %}
                                    </div>
                                    <p>
                                        {{ testimonial.comment|truncatewords:50 }}
                                        <!-- Use the comment from the model -->
                                    </p>
                                    <div class="client-info">
                                        <div class="client-img bg-cover"
                                             style="background-image: url('{{ testimonial.user_image.url }}');
                                                     width: 55px;
                                                     height: 55px;
                                                     border-radius: 50%;
                                                     overflow: hidden;">
                                        </div>
                                        <div class="content">
                                            <h4 class="mb-1">{{ testimonial.user_name }}</h4>
                                            <!-- Use the user_name from the model -->
                                        </div>
                                    </div>
                                </div>
                            </div>
                        {% endfor %}
                    </div>
                </div>
            </div>
        </div>
    </section>


{% endblock content %}